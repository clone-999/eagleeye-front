"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/properties";
exports.ids = ["pages/api/properties"];
exports.modules = {

/***/ "cloudinary":
/*!*****************************!*\
  !*** external "cloudinary" ***!
  \*****************************/
/***/ ((module) => {

module.exports = require("cloudinary");

/***/ }),

/***/ "mongoose":
/*!***************************!*\
  !*** external "mongoose" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("mongoose");

/***/ }),

/***/ "next-auth/react":
/*!**********************************!*\
  !*** external "next-auth/react" ***!
  \**********************************/
/***/ ((module) => {

module.exports = require("next-auth/react");

/***/ }),

/***/ "slugify":
/*!**************************!*\
  !*** external "slugify" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("slugify");

/***/ }),

/***/ "nanoid":
/*!*************************!*\
  !*** external "nanoid" ***!
  \*************************/
/***/ ((module) => {

module.exports = import("nanoid");;

/***/ }),

/***/ "(api)/./models/Property.js":
/*!****************************!*\
  !*** ./models/Property.js ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n\nconst { ObjectId  } = (mongoose__WEBPACK_IMPORTED_MODULE_0___default().Schema);\nconst propertySchema = new (mongoose__WEBPACK_IMPORTED_MODULE_0___default().Schema)({\n    title: {\n        type: String,\n        trim: true,\n        minlength: 3,\n        maxlength: 320,\n        required: true\n    },\n    slug: {\n        type: String,\n        lowercase: true\n    },\n    mode: {\n        type: String,\n        default: \"Rent\",\n        enum: [\n            \"Rent\",\n            \"Sale\"\n        ]\n    },\n    homeCategory: {\n        type: String,\n        default: \"Apartment\",\n        enum: [\n            \"Apartment\",\n            \"Villa\",\n            \"Town House\"\n        ]\n    },\n    phone: {\n        type: String,\n        minlength: 3,\n        maxlength: 21,\n        required: true\n    },\n    price: {\n        type: Number,\n        default: 9.99,\n        required: true\n    },\n    description: {\n        type: {},\n        minlength: 720,\n        required: true\n    },\n    size: {\n        type: Number\n    },\n    numOfBedrooms: {\n        type: Number\n    },\n    numOfBathrooms: {\n        type: Number\n    },\n    furnished: {\n        type: Boolean\n    },\n    refID: {\n        type: String\n    },\n    noticePeriod: {\n        type: String\n    },\n    permitNumber: {\n        type: String\n    },\n    amenities: {\n        type: [\n            String\n        ]\n    },\n    address: {\n        type: String,\n        minlength: 3,\n        maxlength: 320,\n        required: true\n    },\n    photos: [\n        {\n            public_id: {\n                type: String\n            },\n            url: {\n                type: String,\n                required: true\n            }\n        }\n    ],\n    partner: {\n        type: ObjectId,\n        ref: \"User\",\n        required: true\n    }\n}, {\n    timestamps: true\n});\nconst Property = (mongoose__WEBPACK_IMPORTED_MODULE_0___default().models.Property) || mongoose__WEBPACK_IMPORTED_MODULE_0___default().model(\"Property\", propertySchema);\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Property);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9tb2RlbHMvUHJvcGVydHkuanMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQWdDO0FBRWhDLE1BQU0sRUFBRUMsU0FBUSxFQUFFLEdBQUdELHdEQUFlO0FBRXBDLE1BQU1HLGlCQUFpQixJQUFJSCx3REFBZSxDQUN0QztJQUNJSSxPQUFPO1FBQ0xDLE1BQU1DO1FBQ05DLE1BQU0sSUFBSTtRQUNWQyxXQUFXO1FBQ1hDLFdBQVc7UUFDWEMsVUFBVSxJQUFJO0lBQ2hCO0lBQ0FDLE1BQU07UUFDSk4sTUFBTUM7UUFDTk0sV0FBVyxJQUFJO0lBQ2pCO0lBQ0FDLE1BQU07UUFDRlIsTUFBTUM7UUFDTlEsU0FBUztRQUNUQyxNQUFNO1lBQUM7WUFBUTtTQUFPO0lBQzFCO0lBQ0FDLGNBQWM7UUFDWlgsTUFBTUM7UUFDTlEsU0FBUztRQUNUQyxNQUFNO1lBQUM7WUFBYTtZQUFTO1NBQWE7SUFDNUM7SUFDQUUsT0FBTztRQUNIWixNQUFNQztRQUNORSxXQUFXO1FBQ1hDLFdBQVc7UUFDWEMsVUFBVSxJQUFJO0lBQ2xCO0lBQ0FRLE9BQU87UUFDSGIsTUFBTWM7UUFDTkwsU0FBUztRQUNUSixVQUFVLElBQUk7SUFDbEI7SUFDQVUsYUFBYTtRQUNUZixNQUFNLENBQUM7UUFDUEcsV0FBVztRQUNYRSxVQUFVLElBQUk7SUFDbEI7SUFDQVcsTUFBTTtRQUNGaEIsTUFBTWM7SUFDVjtJQUNBRyxlQUFlO1FBQ1hqQixNQUFNYztJQUNWO0lBQ0FJLGdCQUFnQjtRQUNabEIsTUFBTWM7SUFDVjtJQUNBSyxXQUFXO1FBQ1BuQixNQUFNb0I7SUFDVjtJQUNBQyxPQUFPO1FBQ0hyQixNQUFNQztJQUNWO0lBQ0FxQixjQUFjO1FBQ1Z0QixNQUFNQztJQUNWO0lBQ0FzQixjQUFjO1FBQ1Z2QixNQUFNQztJQUNWO0lBQ0F1QixXQUFXO1FBQ1B4QixNQUFNO1lBQUNDO1NBQU87SUFDbEI7SUFDQXdCLFNBQVM7UUFDUHpCLE1BQU1DO1FBQ05FLFdBQVc7UUFDWEMsV0FBVztRQUNYQyxVQUFVLElBQUk7SUFDaEI7SUFDQXFCLFFBQVE7UUFDTjtZQUNFQyxXQUFXO2dCQUNUM0IsTUFBTUM7WUFDUjtZQUNBMkIsS0FBSztnQkFDSDVCLE1BQU1DO2dCQUNOSSxVQUFVLElBQUk7WUFDaEI7UUFDRjtLQUNEO0lBQ0R3QixTQUFTO1FBQ1A3QixNQUFNSjtRQUNOa0MsS0FBSztRQUNMekIsVUFBVSxJQUFJO0lBQ2hCO0FBQ0osR0FDRjtJQUNFMEIsWUFBWSxJQUFJO0FBQ2xCO0FBR0YsTUFBTUMsV0FBV3JDLGlFQUF3QixJQUFJQSxxREFBYyxDQUFDLFlBQVlHO0FBQ3hFLGlFQUFla0MsUUFBUUEsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2VhZ2xlZXllLWZyb250Ly4vbW9kZWxzL1Byb3BlcnR5LmpzPzMyNzMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlIGZyb20gJ21vbmdvb3NlJztcclxuXHJcbmNvbnN0IHsgT2JqZWN0SWQgfSA9IG1vbmdvb3NlLlNjaGVtYTtcclxuXHJcbmNvbnN0IHByb3BlcnR5U2NoZW1hID0gbmV3IG1vbmdvb3NlLlNjaGVtYShcclxuICAgIHtcclxuICAgICAgICB0aXRsZToge1xyXG4gICAgICAgICAgdHlwZTogU3RyaW5nLFxyXG4gICAgICAgICAgdHJpbTogdHJ1ZSxcclxuICAgICAgICAgIG1pbmxlbmd0aDogMyxcclxuICAgICAgICAgIG1heGxlbmd0aDogMzIwLFxyXG4gICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXHJcbiAgICAgICAgfSxcclxuICAgICAgICBzbHVnOiB7XHJcbiAgICAgICAgICB0eXBlOiBTdHJpbmcsXHJcbiAgICAgICAgICBsb3dlcmNhc2U6IHRydWUsXHJcbiAgICAgICAgfSxcclxuICAgICAgICBtb2RlOiB7XHJcbiAgICAgICAgICAgIHR5cGU6IFN0cmluZyxcclxuICAgICAgICAgICAgZGVmYXVsdDogXCJSZW50XCIsXHJcbiAgICAgICAgICAgIGVudW06IFtcIlJlbnRcIiwgXCJTYWxlXCJdLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgaG9tZUNhdGVnb3J5OiB7XHJcbiAgICAgICAgICB0eXBlOiBTdHJpbmcsXHJcbiAgICAgICAgICBkZWZhdWx0OiBcIkFwYXJ0bWVudFwiLFxyXG4gICAgICAgICAgZW51bTogW1wiQXBhcnRtZW50XCIsIFwiVmlsbGFcIiwgXCJUb3duIEhvdXNlXCJdLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgcGhvbmU6IHtcclxuICAgICAgICAgICAgdHlwZTogU3RyaW5nLFxyXG4gICAgICAgICAgICBtaW5sZW5ndGg6IDMsXHJcbiAgICAgICAgICAgIG1heGxlbmd0aDogMjEsXHJcbiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgcHJpY2U6IHtcclxuICAgICAgICAgICAgdHlwZTogTnVtYmVyLFxyXG4gICAgICAgICAgICBkZWZhdWx0OiA5Ljk5LFxyXG4gICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcclxuICAgICAgICB9LFxyXG4gICAgICAgIGRlc2NyaXB0aW9uOiB7XHJcbiAgICAgICAgICAgIHR5cGU6IHt9LFxyXG4gICAgICAgICAgICBtaW5sZW5ndGg6IDcyMCxcclxuICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXHJcbiAgICAgICAgfSxcclxuICAgICAgICBzaXplOiB7XHJcbiAgICAgICAgICAgIHR5cGU6IE51bWJlcixcclxuICAgICAgICB9LFxyXG4gICAgICAgIG51bU9mQmVkcm9vbXM6IHtcclxuICAgICAgICAgICAgdHlwZTogTnVtYmVyLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgbnVtT2ZCYXRocm9vbXM6IHtcclxuICAgICAgICAgICAgdHlwZTogTnVtYmVyLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZnVybmlzaGVkOiB7XHJcbiAgICAgICAgICAgIHR5cGU6IEJvb2xlYW4sXHJcbiAgICAgICAgfSxcclxuICAgICAgICByZWZJRDoge1xyXG4gICAgICAgICAgICB0eXBlOiBTdHJpbmcsXHJcbiAgICAgICAgfSxcclxuICAgICAgICBub3RpY2VQZXJpb2Q6IHtcclxuICAgICAgICAgICAgdHlwZTogU3RyaW5nLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgcGVybWl0TnVtYmVyOiB7XHJcbiAgICAgICAgICAgIHR5cGU6IFN0cmluZyxcclxuICAgICAgICB9LFxyXG4gICAgICAgIGFtZW5pdGllczoge1xyXG4gICAgICAgICAgICB0eXBlOiBbU3RyaW5nXSxcclxuICAgICAgICB9LFxyXG4gICAgICAgIGFkZHJlc3M6IHtcclxuICAgICAgICAgIHR5cGU6IFN0cmluZyxcclxuICAgICAgICAgIG1pbmxlbmd0aDogMyxcclxuICAgICAgICAgIG1heGxlbmd0aDogMzIwLFxyXG4gICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXHJcbiAgICAgICAgfSxcclxuICAgICAgICBwaG90b3M6IFtcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgcHVibGljX2lkOiB7XHJcbiAgICAgICAgICAgICAgdHlwZTogU3RyaW5nLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB1cmw6IHsgXHJcbiAgICAgICAgICAgICAgdHlwZTogU3RyaW5nLFxyXG4gICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICBdLFxyXG4gICAgICAgIHBhcnRuZXI6IHtcclxuICAgICAgICAgIHR5cGU6IE9iamVjdElkLFxyXG4gICAgICAgICAgcmVmOiBcIlVzZXJcIixcclxuICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxyXG4gICAgICAgIH0sXHJcbiAgICB9LFxyXG4gIHtcclxuICAgIHRpbWVzdGFtcHM6IHRydWUsXHJcbiAgfVxyXG4pO1xyXG5cclxuY29uc3QgUHJvcGVydHkgPSBtb25nb29zZS5tb2RlbHMuUHJvcGVydHkgfHwgbW9uZ29vc2UubW9kZWwoJ1Byb3BlcnR5JywgcHJvcGVydHlTY2hlbWEpO1xyXG5leHBvcnQgZGVmYXVsdCBQcm9wZXJ0eTtcclxuIl0sIm5hbWVzIjpbIm1vbmdvb3NlIiwiT2JqZWN0SWQiLCJTY2hlbWEiLCJwcm9wZXJ0eVNjaGVtYSIsInRpdGxlIiwidHlwZSIsIlN0cmluZyIsInRyaW0iLCJtaW5sZW5ndGgiLCJtYXhsZW5ndGgiLCJyZXF1aXJlZCIsInNsdWciLCJsb3dlcmNhc2UiLCJtb2RlIiwiZGVmYXVsdCIsImVudW0iLCJob21lQ2F0ZWdvcnkiLCJwaG9uZSIsInByaWNlIiwiTnVtYmVyIiwiZGVzY3JpcHRpb24iLCJzaXplIiwibnVtT2ZCZWRyb29tcyIsIm51bU9mQmF0aHJvb21zIiwiZnVybmlzaGVkIiwiQm9vbGVhbiIsInJlZklEIiwibm90aWNlUGVyaW9kIiwicGVybWl0TnVtYmVyIiwiYW1lbml0aWVzIiwiYWRkcmVzcyIsInBob3RvcyIsInB1YmxpY19pZCIsInVybCIsInBhcnRuZXIiLCJyZWYiLCJ0aW1lc3RhbXBzIiwiUHJvcGVydHkiLCJtb2RlbHMiLCJtb2RlbCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./models/Property.js\n");

/***/ }),

/***/ "(api)/./pages/api/properties/index.js":
/*!***************************************!*\
  !*** ./pages/api/properties/index.js ***!
  \***************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   \"upload\": () => (/* binding */ upload)\n/* harmony export */ });\n/* harmony import */ var next_auth_react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next-auth/react */ \"next-auth/react\");\n/* harmony import */ var next_auth_react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_auth_react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var nanoid__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! nanoid */ \"nanoid\");\n/* harmony import */ var _models_Property__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../models/Property */ \"(api)/./models/Property.js\");\n/* harmony import */ var _utils_db__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../utils/db */ \"(api)/./utils/db.js\");\n/* harmony import */ var _utils_cloudinary__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../utils/cloudinary */ \"(api)/./utils/cloudinary.js\");\n/* harmony import */ var slugify__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! slugify */ \"slugify\");\n/* harmony import */ var slugify__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(slugify__WEBPACK_IMPORTED_MODULE_5__);\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([nanoid__WEBPACK_IMPORTED_MODULE_1__]);\nnanoid__WEBPACK_IMPORTED_MODULE_1__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\n\n\nconst handler = async (req, res)=>{\n    const session = await (0,next_auth_react__WEBPACK_IMPORTED_MODULE_0__.getSession)({\n        req\n    });\n    if (!session) {\n        return res.status(401).send(\"admin signin required\");\n    }\n    // const { user } = session;\n    if (req.method === \"GET\") {\n        return getHandler(req, res, session.user);\n    } else if (req.method === \"POST\") {\n        return postHandler(req, res, session.user);\n    } else {\n        return res.status(400).send({\n            message: \"Method not allowed\"\n        });\n    }\n};\nconst postHandler = async (req, res, user)=>{\n    await _utils_db__WEBPACK_IMPORTED_MODULE_3__[\"default\"].connect();\n    const alreadyExist = await _models_Property__WEBPACK_IMPORTED_MODULE_2__[\"default\"].findOne({\n        slug: slugify__WEBPACK_IMPORTED_MODULE_5___default()(req.body.title.toLowerCase())\n    });\n    if (alreadyExist) return res.status(400).send(\"Title is taken\");\n    req.body.photos = await upload(req.body.photos, res);\n    req.body.refID = (0,nanoid__WEBPACK_IMPORTED_MODULE_1__.nanoid)(6).toUpperCase();\n    const { title , address , description , extraInfo , checkIn , phone , checkOut , maxGuests , price , amenities , photos , refID  } = req.body;\n    const newProperty = new _models_Property__WEBPACK_IMPORTED_MODULE_2__[\"default\"]({\n        title: title,\n        address: address,\n        description: description,\n        extraInfo: extraInfo,\n        checkIn: checkIn,\n        checkOut: checkOut,\n        maxGuests: maxGuests,\n        price: price,\n        phone: phone,\n        amenities: amenities,\n        photos: photos,\n        refID: refID,\n        partner: user._id,\n        slug: slugify__WEBPACK_IMPORTED_MODULE_5___default()(title)\n    });\n    const property = await newProperty.save();\n    await _utils_db__WEBPACK_IMPORTED_MODULE_3__[\"default\"].disconnect();\n    res.send({\n        message: \"Property created successfully\",\n        property\n    });\n};\nconst getHandler = async (req, res, user)=>{\n    await _utils_db__WEBPACK_IMPORTED_MODULE_3__[\"default\"].connect();\n    const properties = await _models_Property__WEBPACK_IMPORTED_MODULE_2__[\"default\"].find({}).populate(\"partner\", \"_id name\").exec();\n    await _utils_db__WEBPACK_IMPORTED_MODULE_3__[\"default\"].disconnect();\n    res.send(properties);\n};\nconst upload = async (photos, res)=>{\n    try {\n        let imagesBuffer = [];\n        for(let i = 0; i < photos.length; i++){\n            let imageUrl = photos[i].url;\n            if (imageUrl.includes(\"http\")) {\n                imagesBuffer.push({\n                    public_id: null,\n                    url: imageUrl\n                });\n            } else {\n                const result = await _utils_cloudinary__WEBPACK_IMPORTED_MODULE_4__[\"default\"].uploader.upload(imageUrl, {\n                    folder: \"banners\",\n                    width: 1920,\n                    crop: \"scale\"\n                });\n                imagesBuffer.push({\n                    public_id: result.public_id,\n                    url: result.secure_url\n                });\n            }\n        }\n        return imagesBuffer;\n    } catch (error) {\n        console.log(error);\n        return res.status(400).send(\"Image upload failed. Try again.\");\n    }\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (handler);\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SSxDQUFDO29CQUNoQkMsV0FBVyxJQUFJO29CQUNmSCxLQUFLRDtnQkFDUDtZQUNGLE9BQU87Z0JBQ0wsTUFBTUssU0FBUyxNQUFNbkQseUVBQTBCLENBQUM4QyxVQUFVO29CQUN4RE8sUUFBUTtvQkFDUkMsT0FBTztvQkFDUEMsTUFBTTtnQkFDUjtnQkFFQVosYUFBYU0sSUFBSSxDQUFDO29CQUNoQkMsV0FBV0MsT0FBT0QsU0FBUztvQkFDM0JILEtBQUtJLE9BQU9LLFVBQVU7Z0JBQ3hCO1lBQ0YsQ0FBQztRQUVIO1FBQ0EsT0FBT2I7SUFFVCxFQUFFLE9BQU9jLE9BQU87UUFDZEMsUUFBUUMsR0FBRyxDQUFDRjtRQUNaLE9BQU9yRCxJQUFJRSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO0lBQzlCO0FBQ0osRUFBQztBQUNELGlFQUFlTCxPQUFPQSxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZWFnbGVleWUtZnJvbnQvLi9wYWdlcy9hcGkvcHJvcGVydGllcy9pbmRleC5qcz84N2VkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdldFNlc3Npb24gfSBmcm9tICduZXh0LWF1dGgvcmVhY3QnO1xyXG5pbXBvcnQgeyBuYW5vaWQgfSBmcm9tIFwibmFub2lkXCI7XHJcbmltcG9ydCBQcm9wZXJ0eSBmcm9tICcuLi8uLi8uLi9tb2RlbHMvUHJvcGVydHknO1xyXG5pbXBvcnQgZGIgZnJvbSAnLi4vLi4vLi4vdXRpbHMvZGInO1xyXG5pbXBvcnQgY2xvdWRpbmFyeSBmcm9tICcuLi8uLi8uLi91dGlscy9jbG91ZGluYXJ5JztcclxuaW1wb3J0IHNsdWdpZnkgZnJvbSBcInNsdWdpZnlcIjtcclxuXHJcbmNvbnN0IGhhbmRsZXIgPSBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICBjb25zdCBzZXNzaW9uID0gYXdhaXQgZ2V0U2Vzc2lvbih7IHJlcSB9KTtcclxuICBpZiAoIXNlc3Npb24pIHtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuc2VuZCgnYWRtaW4gc2lnbmluIHJlcXVpcmVkJyk7XHJcbiAgfVxyXG4gIC8vIGNvbnN0IHsgdXNlciB9ID0gc2Vzc2lvbjtcclxuICBpZiAocmVxLm1ldGhvZCA9PT0gJ0dFVCcpIHtcclxuICAgIHJldHVybiBnZXRIYW5kbGVyKHJlcSwgcmVzLCBzZXNzaW9uLnVzZXIpO1xyXG4gIH0gZWxzZSBpZiAocmVxLm1ldGhvZCA9PT0gJ1BPU1QnKSB7XHJcbiAgICByZXR1cm4gcG9zdEhhbmRsZXIocmVxLCByZXMsIHNlc3Npb24udXNlcik7XHJcbiAgfSBlbHNlIHtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuc2VuZCh7IG1lc3NhZ2U6ICdNZXRob2Qgbm90IGFsbG93ZWQnIH0pO1xyXG4gIH1cclxufTtcclxuXHJcbmNvbnN0IHBvc3RIYW5kbGVyID0gYXN5bmMgKHJlcSwgcmVzLCB1c2VyKSA9PiB7XHJcbiAgYXdhaXQgZGIuY29ubmVjdCgpO1xyXG4gIGNvbnN0IGFscmVhZHlFeGlzdCA9IGF3YWl0IFByb3BlcnR5LmZpbmRPbmUoe1xyXG4gICAgc2x1Zzogc2x1Z2lmeShyZXEuYm9keS50aXRsZS50b0xvd2VyQ2FzZSgpKSxcclxuICB9KTtcclxuICBpZiAoYWxyZWFkeUV4aXN0KSByZXR1cm4gcmVzLnN0YXR1cyg0MDApLnNlbmQoXCJUaXRsZSBpcyB0YWtlblwiKTtcclxuXHJcbiAgcmVxLmJvZHkucGhvdG9zID0gYXdhaXQgdXBsb2FkKHJlcS5ib2R5LnBob3RvcywgcmVzKVxyXG4gIHJlcS5ib2R5LnJlZklEID0gbmFub2lkKDYpLnRvVXBwZXJDYXNlKCk7XHJcbiAgY29uc3QgeyB0aXRsZSwgYWRkcmVzcywgZGVzY3JpcHRpb24sIGV4dHJhSW5mbywgY2hlY2tJbiwgcGhvbmUsIGNoZWNrT3V0LCBtYXhHdWVzdHMsIHByaWNlLCBhbWVuaXRpZXMsIHBob3RvcywgcmVmSUQgfSA9IHJlcS5ib2R5O1xyXG4gIGNvbnN0IG5ld1Byb3BlcnR5ID0gbmV3IFByb3BlcnR5KHtcclxuICAgIHRpdGxlOiB0aXRsZSxcclxuICAgIGFkZHJlc3M6IGFkZHJlc3MsXHJcbiAgICBkZXNjcmlwdGlvbjogZGVzY3JpcHRpb24sXHJcbiAgICBleHRyYUluZm86IGV4dHJhSW5mbyxcclxuICAgIGNoZWNrSW46IGNoZWNrSW4sXHJcbiAgICBjaGVja091dDogY2hlY2tPdXQsXHJcbiAgICBtYXhHdWVzdHM6IG1heEd1ZXN0cyxcclxuICAgIHByaWNlOiBwcmljZSxcclxuICAgIHBob25lOiBwaG9uZSxcclxuICAgIGFtZW5pdGllczogYW1lbml0aWVzLFxyXG4gICAgcGhvdG9zOiBwaG90b3MsXHJcbiAgICByZWZJRDogcmVmSUQsXHJcbiAgICBwYXJ0bmVyOiB1c2VyLl9pZCxcclxuICAgIHNsdWc6IHNsdWdpZnkodGl0bGUpXHJcbiAgfSk7XHJcblxyXG4gIGNvbnN0IHByb3BlcnR5ID0gYXdhaXQgbmV3UHJvcGVydHkuc2F2ZSgpO1xyXG4gIGF3YWl0IGRiLmRpc2Nvbm5lY3QoKTtcclxuICByZXMuc2VuZCh7IG1lc3NhZ2U6ICdQcm9wZXJ0eSBjcmVhdGVkIHN1Y2Nlc3NmdWxseScsIHByb3BlcnR5IH0pO1xyXG59O1xyXG5cclxuY29uc3QgZ2V0SGFuZGxlciA9IGFzeW5jIChyZXEsIHJlcywgdXNlcikgPT4ge1xyXG4gIGF3YWl0IGRiLmNvbm5lY3QoKTtcclxuICBjb25zdCBwcm9wZXJ0aWVzID0gYXdhaXQgUHJvcGVydHkuZmluZCh7fSkucG9wdWxhdGUoXCJwYXJ0bmVyXCIsIFwiX2lkIG5hbWVcIilcclxuICAuZXhlYygpO1xyXG4gIGF3YWl0IGRiLmRpc2Nvbm5lY3QoKTtcclxuICByZXMuc2VuZChwcm9wZXJ0aWVzKTtcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCB1cGxvYWQgPSBhc3luYyAocGhvdG9zLCByZXMpID0+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGxldCBpbWFnZXNCdWZmZXIgPSBbXTtcclxuICAgICAgXHJcbiAgICAgIGZvciAobGV0IGkgPTA7IGkgPCBwaG90b3MubGVuZ3RoOyAgaSsrKXtcclxuICAgICAgICBsZXQgaW1hZ2VVcmwgPSBwaG90b3NbaV0udXJsO1xyXG4gICAgICAgIGlmIChpbWFnZVVybC5pbmNsdWRlcyhcImh0dHBcIikpIHtcclxuICAgICAgICAgIGltYWdlc0J1ZmZlci5wdXNoKHtcclxuICAgICAgICAgICAgcHVibGljX2lkOiBudWxsLFxyXG4gICAgICAgICAgICB1cmw6IGltYWdlVXJsXHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjbG91ZGluYXJ5LnVwbG9hZGVyLnVwbG9hZChpbWFnZVVybCwge1xyXG4gICAgICAgICAgICBmb2xkZXI6IFwiYmFubmVyc1wiLFxyXG4gICAgICAgICAgICB3aWR0aDogMTkyMCxcclxuICAgICAgICAgICAgY3JvcDogXCJzY2FsZVwiXHJcbiAgICAgICAgICB9KTtcclxuICAgIFxyXG4gICAgICAgICAgaW1hZ2VzQnVmZmVyLnB1c2goe1xyXG4gICAgICAgICAgICBwdWJsaWNfaWQ6IHJlc3VsdC5wdWJsaWNfaWQsXHJcbiAgICAgICAgICAgIHVybDogcmVzdWx0LnNlY3VyZV91cmxcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG4gIFxyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBpbWFnZXNCdWZmZXI7XHJcbiAgXHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmxvZyhlcnJvcik7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuc2VuZChcIkltYWdlIHVwbG9hZCBmYWlsZWQuIFRyeSBhZ2Fpbi5cIik7XHJcbiAgICB9XHJcbn1cclxuZXhwb3J0IGRlZmF1bHQgaGFuZGxlcjsiXSwibmFtZXMiOlsiZ2V0U2Vzc2lvbiIsIm5hbm9pZCIsIlByb3BlcnR5IiwiZGIiLCJjbG91ZGluYXJ5Iiwic2x1Z2lmeSIsImhhbmRsZXIiLCJyZXEiLCJyZXMiLCJzZXNzaW9uIiwic3RhdHVzIiwic2VuZCIsIm1ldGhvZCIsImdldEhhbmRsZXIiLCJ1c2VyIiwicG9zdEhhbmRsZXIiLCJtZXNzYWdlIiwiY29ubmVjdCIsImFscmVhZHlFeGlzdCIsImZpbmRPbmUiLCJzbHVnIiwiYm9keSIsInRpdGxlIiwidG9Mb3dlckNhc2UiLCJwaG90b3MiLCJ1cGxvYWQiLCJyZWZJRCIsInRvVXBwZXJDYXNlIiwiYWRkcmVzcyIsImRlc2NyaXB0aW9uIiwiZXh0cmFJbmZvIiwiY2hlY2tJbiIsInBob25lIiwiY2hlY2tPdXQiLCJtYXhHdWVzdHMiLCJwcmljZSIsImFtZW5pdGllcyIsIm5ld1Byb3BlcnR5IiwicGFydG5lciIsIl9pZCIsInByb3BlcnR5Iiwic2F2ZSIsImRpc2Nvbm5lY3QiLCJwcm9wZXJ0aWVzIiwiZmluZCIsInBvcHVsYXRlIiwiZXhlYyIsImltYWdlc0J1ZmZlciIsImkiLCJsZW5ndGgiLCJpbWFnZVVybCIsInVybCIsImluY2x1ZGVzIiwicHVzaCIsInB1YmxpY19pZCIsInJlc3VsdCIsInVwbG9hZGVyIiwiZm9sZGVyIiwid2lkdGgiLCJjcm9wIiwic2VjdXJlX3VybCIsImVycm9yIiwiY29uc29sZSIsImxvZyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./pages/api/properties/index.js\n");

/***/ }),

/***/ "(api)/./utils/cloudinary.js":
/*!*****************************!*\
  !*** ./utils/cloudinary.js ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\nconst cloudinary = (__webpack_require__(/*! cloudinary */ \"cloudinary\").v2);\ncloudinary.config({\n    cloud_name: process.env.CLOUDINARY_NAME,\n    api_key: process.env.CLOUDINARY_KEY,\n    api_secret: process.env.CLOUDINARY_SECRET\n});\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (cloudinary);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi91dGlscy9jbG91ZGluYXJ5LmpzLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQSxNQUFNQSxhQUFhQyx3REFBd0I7QUFFM0NELFdBQVdHLE1BQU0sQ0FBQztJQUNoQkMsWUFBWUMsUUFBUUMsR0FBRyxDQUFDQyxlQUFlO0lBQ3ZDQyxTQUFTSCxRQUFRQyxHQUFHLENBQUNHLGNBQWM7SUFDbkNDLFlBQVlMLFFBQVFDLEdBQUcsQ0FBQ0ssaUJBQWlCO0FBQzNDO0FBRUEsaUVBQWVYLFVBQVVBLEVBQUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9lYWdsZWV5ZS1mcm9udC8uL3V0aWxzL2Nsb3VkaW5hcnkuanM/OGUzNyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBjbG91ZGluYXJ5ID0gcmVxdWlyZSgnY2xvdWRpbmFyeScpLnYyO1xyXG5cclxuY2xvdWRpbmFyeS5jb25maWcoeyBcclxuICBjbG91ZF9uYW1lOiBwcm9jZXNzLmVudi5DTE9VRElOQVJZX05BTUUsIFxyXG4gIGFwaV9rZXk6IHByb2Nlc3MuZW52LkNMT1VESU5BUllfS0VZLCBcclxuICBhcGlfc2VjcmV0OiBwcm9jZXNzLmVudi5DTE9VRElOQVJZX1NFQ1JFVCBcclxufSk7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbG91ZGluYXJ5Il0sIm5hbWVzIjpbImNsb3VkaW5hcnkiLCJyZXF1aXJlIiwidjIiLCJjb25maWciLCJjbG91ZF9uYW1lIiwicHJvY2VzcyIsImVudiIsIkNMT1VESU5BUllfTkFNRSIsImFwaV9rZXkiLCJDTE9VRElOQVJZX0tFWSIsImFwaV9zZWNyZXQiLCJDTE9VRElOQVJZX1NFQ1JFVCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./utils/cloudinary.js\n");

/***/ }),

/***/ "(api)/./utils/db.js":
/*!*********************!*\
  !*** ./utils/db.js ***!
  \*********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n\nconst connection = {};\nasync function connect() {\n    if (connection.isConnected) {\n        console.log(\"already connected\");\n        return;\n    }\n    if ((mongoose__WEBPACK_IMPORTED_MODULE_0___default().connections.length) > 0) {\n        connection.isConnected = (mongoose__WEBPACK_IMPORTED_MODULE_0___default().connections[0].readyState);\n        if (connection.isConnected === 1) {\n            console.log(\"use previous connection\");\n            return;\n        }\n        await mongoose__WEBPACK_IMPORTED_MODULE_0___default().disconnect();\n    }\n    const db = await mongoose__WEBPACK_IMPORTED_MODULE_0___default().connect(process.env.MONGODB_URI);\n    console.log(\"new connection\");\n    connection.isConnected = db.connections[0].readyState;\n}\nasync function disconnect() {\n    if (connection.isConnected) {\n        if (false) {} else {\n            console.log(\"not disconnected\");\n        }\n    }\n}\nfunction convertDocToObj(doc) {\n    doc._id = doc._id.toString();\n    doc.createdAt = doc.createdAt.toString();\n    doc.updatedAt = doc.updatedAt.toString();\n    if (doc?.photos.length > 0) {\n        doc.photos.map((photo)=>{\n            photo._id = photo._id.toString();\n        });\n    }\n    if (doc?.partner) {\n        doc.partner = doc.partner.toString();\n    }\n    return doc;\n}\nconst db = {\n    connect,\n    disconnect,\n    convertDocToObj\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (db);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi91dGlscy9kYi5qcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBZ0M7QUFFaEMsTUFBTUMsYUFBYSxDQUFDO0FBRXBCLGVBQWVDLFVBQVU7SUFDdkIsSUFBSUQsV0FBV0UsV0FBVyxFQUFFO1FBQzFCQyxRQUFRQyxHQUFHLENBQUM7UUFDWjtJQUNGLENBQUM7SUFDRCxJQUFJTCxvRUFBMkIsR0FBRyxHQUFHO1FBQ25DQyxXQUFXRSxXQUFXLEdBQUdILDJFQUFrQztRQUMzRCxJQUFJQyxXQUFXRSxXQUFXLEtBQUssR0FBRztZQUNoQ0MsUUFBUUMsR0FBRyxDQUFDO1lBQ1o7UUFDRixDQUFDO1FBQ0QsTUFBTUwsMERBQW1CO0lBQzNCLENBQUM7SUFDRCxNQUFNVSxLQUFLLE1BQU1WLHVEQUFnQixDQUFDVyxRQUFRQyxHQUFHLENBQUNDLFdBQVc7SUFDekRULFFBQVFDLEdBQUcsQ0FBQztJQUNaSixXQUFXRSxXQUFXLEdBQUdPLEdBQUdKLFdBQVcsQ0FBQyxFQUFFLENBQUNFLFVBQVU7QUFDdkQ7QUFFQSxlQUFlQyxhQUFhO0lBQzFCLElBQUlSLFdBQVdFLFdBQVcsRUFBRTtRQUMxQixJQUFJUSxLQUF5QixFQUFjLEVBRzFDLE1BQU07WUFDTFAsUUFBUUMsR0FBRyxDQUFDO1FBQ2QsQ0FBQztJQUNILENBQUM7QUFDSDtBQUVBLFNBQVNTLGdCQUFnQkMsR0FBRyxFQUFFO0lBQzVCQSxJQUFJQyxHQUFHLEdBQUdELElBQUlDLEdBQUcsQ0FBQ0MsUUFBUTtJQUMxQkYsSUFBSUcsU0FBUyxHQUFHSCxJQUFJRyxTQUFTLENBQUNELFFBQVE7SUFDdENGLElBQUlJLFNBQVMsR0FBR0osSUFBSUksU0FBUyxDQUFDRixRQUFRO0lBQ3RDLElBQUlGLEtBQUtLLE9BQU9iLE1BQU0sR0FBRyxHQUFHO1FBQzFCUSxJQUFJSyxNQUFNLENBQUNDLEdBQUcsQ0FBQyxDQUFDQyxRQUFVO1lBQ3hCQSxNQUFNTixHQUFHLEdBQUdNLE1BQU1OLEdBQUcsQ0FBQ0MsUUFBUTtRQUNoQztJQUNGLENBQUM7SUFFRCxJQUFJRixLQUFLUSxTQUFTO1FBQ2hCUixJQUFJUSxPQUFPLEdBQUdSLElBQUlRLE9BQU8sQ0FBQ04sUUFBUTtJQUNwQyxDQUFDO0lBQ0QsT0FBT0Y7QUFDVDtBQUVBLE1BQU1MLEtBQUs7SUFBRVI7SUFBU087SUFBWUs7QUFBZ0I7QUFDbEQsaUVBQWVKLEVBQUVBLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9lYWdsZWV5ZS1mcm9udC8uL3V0aWxzL2RiLmpzPzdjYjIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlIGZyb20gJ21vbmdvb3NlJztcclxuXHJcbmNvbnN0IGNvbm5lY3Rpb24gPSB7fTtcclxuXHJcbmFzeW5jIGZ1bmN0aW9uIGNvbm5lY3QoKSB7XHJcbiAgaWYgKGNvbm5lY3Rpb24uaXNDb25uZWN0ZWQpIHtcclxuICAgIGNvbnNvbGUubG9nKCdhbHJlYWR5IGNvbm5lY3RlZCcpO1xyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxuICBpZiAobW9uZ29vc2UuY29ubmVjdGlvbnMubGVuZ3RoID4gMCkge1xyXG4gICAgY29ubmVjdGlvbi5pc0Nvbm5lY3RlZCA9IG1vbmdvb3NlLmNvbm5lY3Rpb25zWzBdLnJlYWR5U3RhdGU7XHJcbiAgICBpZiAoY29ubmVjdGlvbi5pc0Nvbm5lY3RlZCA9PT0gMSkge1xyXG4gICAgICBjb25zb2xlLmxvZygndXNlIHByZXZpb3VzIGNvbm5lY3Rpb24nKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgYXdhaXQgbW9uZ29vc2UuZGlzY29ubmVjdCgpO1xyXG4gIH1cclxuICBjb25zdCBkYiA9IGF3YWl0IG1vbmdvb3NlLmNvbm5lY3QocHJvY2Vzcy5lbnYuTU9OR09EQl9VUkkpO1xyXG4gIGNvbnNvbGUubG9nKCduZXcgY29ubmVjdGlvbicpO1xyXG4gIGNvbm5lY3Rpb24uaXNDb25uZWN0ZWQgPSBkYi5jb25uZWN0aW9uc1swXS5yZWFkeVN0YXRlO1xyXG59XHJcblxyXG5hc3luYyBmdW5jdGlvbiBkaXNjb25uZWN0KCkge1xyXG4gIGlmIChjb25uZWN0aW9uLmlzQ29ubmVjdGVkKSB7XHJcbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdwcm9kdWN0aW9uJykge1xyXG4gICAgICBhd2FpdCBtb25nb29zZS5kaXNjb25uZWN0KCk7XHJcbiAgICAgIGNvbm5lY3Rpb24uaXNDb25uZWN0ZWQgPSBmYWxzZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdub3QgZGlzY29ubmVjdGVkJyk7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBjb252ZXJ0RG9jVG9PYmooZG9jKSB7XHJcbiAgZG9jLl9pZCA9IGRvYy5faWQudG9TdHJpbmcoKTtcclxuICBkb2MuY3JlYXRlZEF0ID0gZG9jLmNyZWF0ZWRBdC50b1N0cmluZygpO1xyXG4gIGRvYy51cGRhdGVkQXQgPSBkb2MudXBkYXRlZEF0LnRvU3RyaW5nKCk7XHJcbiAgaWYgKGRvYz8ucGhvdG9zLmxlbmd0aCA+IDApIHtcclxuICAgIGRvYy5waG90b3MubWFwKChwaG90bykgPT4ge1xyXG4gICAgICBwaG90by5faWQgPSBwaG90by5faWQudG9TdHJpbmcoKVxyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIGlmIChkb2M/LnBhcnRuZXIpIHtcclxuICAgIGRvYy5wYXJ0bmVyID0gZG9jLnBhcnRuZXIudG9TdHJpbmcoKVxyXG4gIH1cclxuICByZXR1cm4gZG9jO1xyXG59XHJcblxyXG5jb25zdCBkYiA9IHsgY29ubmVjdCwgZGlzY29ubmVjdCwgY29udmVydERvY1RvT2JqIH07XHJcbmV4cG9ydCBkZWZhdWx0IGRiO1xyXG4iXSwibmFtZXMiOlsibW9uZ29vc2UiLCJjb25uZWN0aW9uIiwiY29ubmVjdCIsImlzQ29ubmVjdGVkIiwiY29uc29sZSIsImxvZyIsImNvbm5lY3Rpb25zIiwibGVuZ3RoIiwicmVhZHlTdGF0ZSIsImRpc2Nvbm5lY3QiLCJkYiIsInByb2Nlc3MiLCJlbnYiLCJNT05HT0RCX1VSSSIsImNvbnZlcnREb2NUb09iaiIsImRvYyIsIl9pZCIsInRvU3RyaW5nIiwiY3JlYXRlZEF0IiwidXBkYXRlZEF0IiwicGhvdG9zIiwibWFwIiwicGhvdG8iLCJwYXJ0bmVyIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./utils/db.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = (__webpack_exec__("(api)/./pages/api/properties/index.js"));
module.exports = __webpack_exports__;

})();